<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<title>Lista</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
	<link href="https://sisweb.sencico.gob.pe/wsSisWeb/Content/AdminLTE-master/bootstrap/css/font-awesome.min.css"
		rel="stylesheet">
	<style>
		body {
			background-color: #f8f9fa;
		}

		.container {
			max-width: 1500px;
			margin-top: 50px;
		}

		h2 {
			text-align: center;
			margin-bottom: 30px;
			color: #007bff;
		}

		table {
			width: 100%;
			margin-bottom: 1rem;
			color: #212529;
			border-collapse: collapse;
			border-spacing: 0;
		}

		th,
		td {
			padding: 0.75rem;
			text-align: left;
			border-bottom: 1px solid #dee2e6;
		}

		th {
			background-color: #007bff;
			color: #ffffff;
		}

		tbody tr:hover {
			background-color: #f5f5f5;
		}

		.btn-primary,
		.btn-info,
		.btn-danger {
			padding: 0.375rem 0.75rem;
			font-size: 0.9rem;
		}

		img {
			width: 25px;
		}
	</style>
</head>

<body>
	<div class="container mt-5">
		<h2>Lista de Componentes</h2>
		<form th:action="@{/home/upload}" method="post" enctype="multipart/form-data">
			<input type="file" name="file" />
			<button type="submit">Subir Archivo</button>
		</form>
		<table id="componentesTable" class="table table-striped">
			<thead>
				<tr>
					<th>Componente</th>
					<th>Nombre</th>
					<th>Sector</th>
					<th>Paquete</th>
					<th>Codigo</th>
					<th></th>
					<th></th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="fila:${listComponentes}">
					<td>
						<a th:href="@{/home/propiedades/__${fila.id}__}" th:text="${fila.componente}"></a>
					</td>
					<td th:text="${fila.nombre}"></td>
					<td th:text="${fila.sector}"></td>
					<td th:text="${fila.paquete}"></td>
					<td th:text="${fila.codigo}"></td>
					<td>
						<!-- Crear un botÃ³n con un enlace -->
						<a th:href="${fila.enlace_bim}" target="_blank">
							<button type="button" class="btn btn-primary"><img th:src="@{../static/imagenes/web.png}" alt="link"></button>
						</a>
					</td>
					<td>
						<a th:href="@{/home/edit/__${fila.id}__}">
							<button type="button" class="btn btn-info"><img th:src="@{../static/imagenes/recargar.png}" alt="upd"></button>
						</a>
					</td>
					<td>
						<a th:href="@{/home/del/__${fila.id}__}">
							<button type="button" class="btn btn-danger"><img th:src="@{../static/imagenes/borrar.png}" alt="del"/></button>
						</a>
					</td>
				</tr>
			</tbody>
		</table>
	</div>

	<script>
		window.onload = function () {
			let tabla = document.getElementById("componentesTable");
			let filas = Array.from(tabla.rows).slice(1); // Excluimos la primera fila (cabecera)
			filas.sort((a, b) => {
				let valorA = a.cells[0].textContent.trim();
				let valorB = b.cells[0].textContent.trim();
				return valorA.localeCompare(valorB, undefined, {numeric: true});
			});
			// Vaciamos la tabla
			while (tabla.rows.length > 1) {
				tabla.deleteRow(1);
			}
			// Agregamos las filas ordenadas
			filas.forEach(fila => {
				tabla.appendChild(fila);
			});
		};
	</script>

</body>

</html>